<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Predict VIP (Optimized Hybrid Model with Aviator V13)</title>
    <link rel="icon" type="image/png" href="favicon.png">

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/tailwind-scrollbar@3.0.5/dist/tailwind-scrollbar.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700&display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Roboto+Mono:wght@400;500&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>

    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">

    <style>
        /* --- Predict VIP Original Styles --- */
        body { font-family: 'Montserrat', sans-serif; color: #cbd5e1; line-height: 1.6; }
        .overflow-hidden { overflow: hidden !important; }
        .animate-gradient-x { animation: gradient-x 5s ease infinite; background-size: 200% 200%; } @keyframes gradient-x { 0%, 100% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } }
        .fade-in { animation: fadeIn 0.3s ease-out forwards; } @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .loader { border: 4px solid #f3f3f3; border-radius: 50%; border-top: 4px solid #3498db; width: 20px; height: 20px; animation: spin 2s linear infinite; margin: 0 auto; } @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .tab-hidden { display: none !important; }
        .popup-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.85); display: flex; justify-content: center; align-items: center; z-index: 1000; } .popup-container.tab-hidden { display: none; }
        .popup-content { padding: 1rem; border-radius: 1rem; max-width: 90%; box-shadow: 0 10px 20px rgba(0, 0, 0, 0.5); color: white; text-align: center; position: relative; }
        #win-menu-container .popup-content { width: 90%; max-width: 420px; background: linear-gradient(135deg, #1e3a8a, #3b82f6, #60a5fa, #1e3a8a); background-size: 300% 300%; animation: gradient-x 8s ease infinite; padding: 0.8rem; }
        .close-popup { position: absolute; top: 0.4rem; right: 0.4rem; font-size: 1.4rem; cursor: pointer; color: white; background: none; border: none; line-height: 1; padding: 0.1rem; }
        #win-menu-container h2 { font-size: 1.1rem; margin-bottom: 0.5rem; } #win-menu-container .period-countdown-grid { margin-bottom: 0.5rem; } #win-menu-container p { font-size: 0.85rem; margin-bottom: 0.3rem; line-height: 1.2; }
        .prediction-history { margin-top: 0.6rem; max-height: 240px; overflow-y: auto; background: rgba(255, 255, 255, 0.1); padding: 0.4rem; border-radius: 0.5rem; }
        .history-table { width: 100%; table-layout: fixed; border-collapse: collapse; }
        .history-table th { background: rgba(30, 58, 138, 0.9); color: white; padding: 0.2rem 0.1rem; font-weight: bold; text-align: center; position: sticky; top: 0; z-index: 1; font-size: 0.6rem; white-space: nowrap; }
        .history-table td { padding: 0.25rem 0.1rem; border-bottom: 1px solid rgba(255, 255, 255, 0.1); font-size: 0.6rem; text-align: center; vertical-align: middle; }
        .history-table td:first-child { font-size: 0.58rem; word-break: normal; white-space: nowrap; text-align: left; padding-left: 0.3rem; padding-right: 0.1rem; overflow: visible; }
        .history-table td:nth-child(2) { font-weight: 500; padding-left: 0.1rem; padding-right: 0.1rem; white-space: nowrap; font-size: 0.6rem; }
        .history-table td:nth-child(3) { white-space: nowrap; display: flex; align-items: center; justify-content: center; font-weight: 500; padding-left: 0.1rem; padding-right: 0.1rem; font-size: 0.6rem; }
        .history-table td:nth-child(4) { min-width: 38px; padding: 0 0.1rem; }
        .status-box { min-width: 38px; height: 16px; padding: 0 0.1rem; border-radius: 3px; font-size: 0.55rem; letter-spacing: -0.5px; white-space: nowrap; display: inline-flex; align-items: center; justify-content: center; font-weight: bold; text-transform: uppercase; margin: auto; box-sizing: border-box; }
        .history-item.pending td { background: rgba(250, 204, 21, 0.08); } .history-item.win td { background: rgba(34, 197, 94, 0.08); } .history-item.loss td { background: rgba(239, 68, 68, 0.08); }
        .color-dot { width: 7px; height: 7px; border-radius: 50%; display: inline-block; margin: 0 2px; vertical-align: middle; flex-shrink: 0; }
        .history-table td:nth-child(3) span { display: inline-block; } .history-table td i { margin-left: 1px; font-size: 0.65em; }
        .history-item.pending .status-box { background: #facc15; color: #1e3a8a; } .history-item.win .status-box { background: #22c55e; color: white; } .history-item.loss .status-box { background: #ef4444; color: white; }
        #prediction-display { margin-top: 0.4rem; margin-bottom: 0.5rem; padding: 0.5rem; background: rgba(0,0,0,0.25); border-radius: 0.375rem; border: 1px solid rgba(255, 255, 255, 0.1); min-height: 36px; }
        #prediction-output { font-size: 1.1rem; font-weight: bold; white-space: nowrap; }
        #prediction-output .big, .prediction-text .big { color: #fde047; } #prediction-output .small, .prediction-text .small { color: #60a5fa; } #prediction-output .red, .prediction-text .red { color: #f87171; } #prediction-output .green, .prediction-text .green { color: #4ade80; } #prediction-output .violet, .prediction-text .violet { color: #a855f7; } #prediction-output span { display: inline !important; }
        .stats-display-container { padding: 0.4rem 0.5rem; margin-bottom: 0.6rem; font-size: 0.7rem; }
        .main-tabs { background-color: rgba(30, 58, 138, 0.8); backdrop-filter: blur(5px); border-bottom: 1px solid #3b82f6; }
        .tab-button { background-color: transparent; color: #93c5fd; padding: 0.5rem 0.6rem; border: none; cursor: pointer; transition: all 0.3s ease; font-weight: 500; font-size: 0.8rem; border-bottom: 3px solid transparent; white-space: nowrap; flex-shrink: 0; }
        .tab-button:hover { background-color: rgba(59, 130, 246, 0.3); color: white; }
        .tab-button.active { color: white; border-bottom-color: #facc15; font-weight: 700; }
        .tab-content { min-height: 300px; padding-top: 1.5rem; }
        .scrollbar-thin::-webkit-scrollbar { height: 3px; } .scrollbar-thin::-webkit-scrollbar-track { background: transparent; } .scrollbar-thin::-webkit-scrollbar-thumb { background: rgba(148, 163, 184, 0.4); border-radius: 3px;} .scrollbar-thin::-webkit-scrollbar-thumb:hover { background: rgba(148, 163, 184, 0.6); }
        #canvas-container { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(0, 0, 0, 0.9); padding: 1.5rem; border-radius: 0.5rem; z-index: 2000; width: 90%; max-width: 600px; box-shadow: 0 0 20px rgba(0,0,0,0.5); } #canvas-container.active { display: block; } #canvas-container canvas { max-height: 60vh; } #close-canvas { margin-top: 1rem; background-color: #dc2626; color: white; padding: 0.5rem 1rem; border-radius: 0.375rem; transition: background-color 0.2s; cursor: pointer; } #close-canvas:hover { background-color: #b91c1c; }
        #mines-content .mines-container { font-family: 'Poppins', sans-serif; background-color: rgba(15, 23, 42, 0.7); backdrop-filter: blur(3px); color: #cbd5e1; border-radius: 0.5rem; padding: 1rem; border: 1px solid #374151; } .mines-grid { display: grid; grid-template-columns: repeat(5, minmax(0, 1fr)); gap: 7px; max-width: 340px; margin: 1.5rem auto; aspect-ratio: 1 / 1; } .mines-tile { width: 100%; height: auto; aspect-ratio: 1 / 1; background: linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05)); border-radius: 12px; display: flex; align-items: center; justify-content: center; transition: background 0.25s ease, transform 0.15s ease, border-color 0.25s ease, box-shadow 0.25s ease; font-size: 1.6em; font-weight: bold; box-sizing: border-box; border: 1px solid rgba(255, 255, 255, 0.2); position: relative; overflow: hidden; color: transparent; cursor: default; } .mines-tile.predicted-safe { border: 2px solid #4ade80; box-shadow: 0 0 15px rgba(74, 222, 128, 0.6); background: rgba(74, 222, 128, 0.1); } .mines-tile.predicted-mine { border: 2px solid #f87171; box-shadow: 0 0 15px rgba(248, 113, 113, 0.6); background: rgba(248, 113, 113, 0.1); } .mines-controls { display: flex; justify-content: center; align-items: center; flex-wrap: wrap; gap: 10px; margin-bottom: 1rem; } .mines-controls label { color: #cbd5e1; font-size: 0.9rem; } .mines-controls input[type="number"] { width: 70px; padding: 0.5rem; font-size: 0.9rem; background: #0f172a; border: 1px solid #475569; color: #e2e8f0; border-radius: 0.375rem; text-align: center; } .mines-controls input[type="number"]:focus { border-color: #06b6d4; outline: none; box-shadow: 0 0 0 2px rgba(6, 182, 212, 0.4); } .mines-predict-btn { display: inline-flex; background-color: #3b82f6; color: white; padding: 0.5rem 1.25rem; border-radius: 0.375rem; font-weight: 500; transition: background-color 0.2s; cursor: pointer; } .mines-predict-btn:hover { background-color: #2563eb; } .mines-prediction-summary { font-size: 0.9rem; color: #cbd5e1; text-align: center; padding: 0.75rem; background: rgba(0,0,0,0.2); border-radius: 0.5rem; border: 1px solid rgba(255, 255, 255, 0.1); margin-top: 1rem; min-height: 45px; } .mines-error { color: #f87171; text-align: center; margin-top: 0.5rem; font-size: 0.9rem; min-height: 1.25em; }
        .button { transition: background-color 0.3s ease, transform 0.2s ease; } .button:hover { transform: scale(1.05); }
        ::-webkit-scrollbar { width: 5px; height: 5px; } ::-webkit-scrollbar-track { background: #374151; border-radius: 10px; } ::-webkit-scrollbar-thumb { background: #6b7280; border-radius: 10px; } ::-webkit-scrollbar-thumb:hover { background: #9ca3af; }

        /* --- Styles for NEW Aviator V13 Theme (Dark Blue & Amber) --- */
        #aviator-content {
            font-family: 'Roboto', sans-serif;
            --aviator-primary-accent: #fbbf24;  /* Amber */
            --aviator-text-color: #ffffff;      /* White */
            --aviator-card-bg: rgba(15, 23, 42, 0.8); /* Dark Slate Glass (slightly more opaque) */
            --aviator-border-color: rgba(251, 191, 36, 0.35); /* Amber border (slightly more opaque) */
            --aviator-input-bg: rgba(30, 41, 59, 0.9);  /* Darker Slate Input (more opaque) */
            --aviator-success-green: #81c784;
            --aviator-error-red: #ef4444;
            --aviator-glow-accent: rgba(251, 191, 36, 0.5);
            --aviator-button-text: #111827;
            --aviator-muted-text: #a0aec0;
            --aviator-label-color: var(--aviator-primary-accent);
            --aviator-label-opacity: 0.9;
            color: var(--aviator-text-color);
            line-height: 1.65;
        }

        #aviator-content .container {
            /* background: var(--aviator-card-bg); */ /* REMOVED for transparency */
            background: transparent;
            border-radius: 0;
            /* box-shadow: 0 8px 30px rgba(0, 0, 0, 0.4); */ /* REMOVED */
            width: 100%;
            max-width: 600px;
            /* border: 1px solid var(--aviator-border-color); */ /* REMOVED */
            /* animation: slideIn 0.5s ease-out; */
            /* backdrop-filter: blur(10px); */ /* REMOVED */
            margin: 0 auto;
            padding: 10px 0;
        }
        /* @keyframes slideIn { from { opacity: 0; transform: translateY(-20px); } to { opacity: 1; transform: translateY(0); } } */ /* Animation removed as container is transparent */

        #aviator-content h1 { color: var(--aviator-primary-accent); font-size: 1.75rem; font-weight: 700; margin-bottom: 12px; text-shadow: 0 0 12px var(--aviator-glow-accent); display: flex; align-items: center; gap: 12px; justify-content: center; padding-top: 5px; border-bottom: 1px solid var(--aviator-border-color); padding-bottom: 15px; }
        #aviator-content .disclaimer { color: var(--aviator-muted-text); font-size: 0.8rem; margin-bottom: 25px; opacity: 0.9; text-align: center; }
        #aviator-content .input-area { margin: 25px 0; position: relative; }
        #aviator-content .input-area label, #aviator-content .history-section label { font-size: 0.9rem; font-weight: 500; color: var(--aviator-label-color); opacity: var(--aviator-label-opacity); margin-bottom: 12px; display: flex; align-items: center; justify-content: flex-start; gap: 8px; text-align: left; padding-left: 5px; }
        #aviator-content .input-wrapper { display: flex; gap: 10px; align-items: center; }
        #aviator-content input[type="number"] { flex-grow: 1; min-width: 100px; padding: 12px 15px; height: 48px; border: 1px solid var(--aviator-border-color); border-radius: 8px; background: var(--aviator-input-bg); color: var(--aviator-text-color); font-size: 1rem; transition: border-color 0.3s, box-shadow 0.3s; text-align: center; -moz-appearance: textfield; appearance: textfield; box-sizing: border-box; }
        #aviator-content input[type="number"]::placeholder { color: var(--aviator-muted-text); opacity: 0.7; font-size: 1rem; }
        #aviator-content input[type="number"]::-webkit-outer-spin-button, #aviator-content input[type="number"]::-webkit-inner-spin-button { -webkit-appearance: none; }
        #aviator-content input[type="number"]:focus { border-color: var(--aviator-primary-accent); box-shadow: 0 0 10px var(--aviator-glow-accent); outline: none; background-color: #0f172a; }
        #aviator-content .submit-btn { background: var(--aviator-primary-accent); color: var(--aviator-button-text); border: none; padding: 12px 22px; border-radius: 8px; cursor: pointer; font-size: 0.95rem; font-weight: 600; transition: transform 0.2s, box-shadow 0.2s, background-color 0.2s; flex-shrink: 0; line-height: 1.25; height: 48px; display: inline-flex; align-items: center; justify-content: center; gap: 6px; }
        #aviator-content .submit-btn:hover { background-color: #facc15; transform: translateY(-2px); box-shadow: 0 5px 15px var(--aviator-glow-accent); }
        #aviator-content .input-hint { font-size: 0.8rem; color: var(--aviator-muted-text); margin-top: 10px; text-align: center; opacity: 0.8; }

        /* --- ADJUSTMENT: Input Error Box Styling --- */
        #aviator-content #input-error {
            font-size: 0.85rem;
            color: var(--aviator-error-red);
            /* min-height: 22px; */ /* REMOVED */
            text-align: left;
            margin-top: 6px;
            padding: 0 5px; /* Default padding */
            font-weight: 500;
            border: none; /* No border by default */
            background: none; /* No background by default */
            /* Transition can make appearance smoother */
            transition: all 0.2s ease-in-out;
        }
        /* Apply styles ONLY when error class is present AND element has content */
        #aviator-content #input-error.status-error:not(:empty) {
            background-color: rgba(239, 68, 68, 0.15);
            border: 1px solid rgba(239, 68, 68, 0.4);
            border-radius: 4px;
            padding: 3px 5px; /* Padding only when visible */
            margin-top: 6px; /* Ensure margin */
        }
        /* --- End Adjustment --- */


        #aviator-content .prediction-main, #aviator-content .prediction, #aviator-content .ai-analysis, #aviator-content .stats-last-10 { background: var(--aviator-card-bg); border: 1px solid var(--aviator-border-color); border-radius: 12px; padding: 20px; margin-bottom: 20px; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3); }
        #aviator-content .prediction-main { margin-top: 35px; text-align: center; padding: 25px; }
        #aviator-content .prediction-main .label { font-size: 0.95rem; color: var(--aviator-primary-accent); font-weight: 500; text-transform: uppercase; letter-spacing: 0.8px; }
        #aviator-content .prediction-main .value { font-size: 3.2rem; font-weight: 700; color: var(--aviator-primary-accent); text-shadow: 0 0 12px var(--aviator-glow-accent); margin: 12px 0; line-height: 1.1; }
        #aviator-content #confidence-score { font-size: 0.9rem; color: var(--aviator-text-color); opacity: 0.9; margin-top: 5px; }
        #aviator-content .sub-predictions { display: grid; grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); gap: 18px; }
        #aviator-content .prediction { text-align: center; transition: transform 0.2s ease-out, border-color 0.2s ease-out; padding: 20px; margin-bottom: 0; }
        #aviator-content .prediction:hover { transform: translateY(-5px) scale(1.02); border-color: var(--aviator-primary-accent); }
        #aviator-content .prediction strong { color: var(--aviator-primary-accent); font-size: 0.9rem; font-weight: 500; display: flex; align-items: center; justify-content: center; gap: 6px; margin-bottom: 10px; text-transform: uppercase; letter-spacing: 0.5px; }
        #aviator-content .prediction span { color: var(--aviator-text-color); font-size: 1.2rem; font-weight: 600; display: block; }
        #aviator-content .ai-analysis { padding: 25px; }
        #aviator-content .ai-analysis h3 { font-size: 1.15rem; color: var(--aviator-primary-accent); margin-bottom: 15px; text-align: center; padding-bottom: 10px; border-bottom: 1px solid var(--aviator-border-color); }
        #aviator-content #ai-analysis-text { font-size: 0.95rem; color: var(--aviator-text-color); line-height: 1.8; white-space: pre-line; opacity: 0.95; }
        #aviator-content .stats-last-10 { padding: 25px; }
        #aviator-content .stats-last-10 h3 { font-size: 1.15rem; color: var(--aviator-primary-accent); margin-bottom: 20px; border-bottom: 1px solid var(--aviator-border-color); padding-bottom: 12px; text-align: center; }
        #aviator-content .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)); gap: 12px; }
        #aviator-content .stat-item { background: rgba(30, 41, 59, 0.7); padding: 12px; border-radius: 8px; text-align: center; }
        #aviator-content .stat-item .label { font-size: 0.8rem; color: var(--aviator-muted-text); display: block; margin-bottom: 4px; text-transform: uppercase; letter-spacing: 0.5px; }
        #aviator-content .stat-item .value { font-size: 1.05rem; font-weight: 600; color: var(--aviator-text-color); display: block; }
        #aviator-content .stat-item .value#high-last-10 { color: var(--aviator-success-green); }
        #aviator-content .stat-item .value#low-last-10 { color: var(--aviator-error-red); }
        #aviator-content #multiplierChart { max-height: 160px; margin-top: 25px; width: 100% !important; }
        #aviator-content .history-section { margin: 25px 0; }
        #aviator-content #history { background: var(--aviator-input-bg); padding: 15px; border-radius: 8px; font-size: 0.9rem; color: var(--aviator-text-color); max-height: 130px; overflow-y: auto; border: 1px solid var(--aviator-border-color); text-align: left; line-height: 1.7; word-break: break-all; }
        #aviator-content .action-buttons { display: flex; gap: 15px; justify-content: center; margin-top: 35px; flex-wrap: wrap; }
        #aviator-content .btn { padding: 12px 28px; border: none; border-radius: 8px; font-size: 0.95rem; font-weight: 600; cursor: pointer; transition: transform 0.2s, box-shadow 0.2s, background-color 0.2s; display: inline-flex; align-items: center; justify-content: center; gap: 8px; }
        #aviator-content .reset-btn { background: var(--aviator-error-red); color: var(--aviator-text-color); }
        #aviator-content .reset-btn:hover { background-color: #dc2626; transform: translateY(-2px); box-shadow: 0 5px 15px rgba(239, 68, 68, 0.5); }
        #aviator-content .export-btn { background: var(--aviator-primary-accent); color: var(--aviator-button-text); }
        #aviator-content .export-btn:hover { background-color: #facc15; transform: translateY(-2px); box-shadow: 0 5px 15px var(--aviator-glow-accent); }
        #aviator-content #status { margin-top: 30px; font-size: 0.9rem; text-align: center; min-height: 22px; padding: 10px 12px; border-radius: 8px; font-weight: 500; }
        #aviator-content .status-active { background-color: rgba(129, 199, 132, 0.15); color: var(--aviator-success-green); border: 1px solid rgba(129, 199, 132, 0.4); }
        #aviator-content .status-inactive { background-color: rgba(15, 23, 42, 0.5); color: var(--aviator-muted-text); border: 1px solid rgba(51, 65, 85, 0.6); }
        #aviator-content .status-error { background-color: rgba(239, 68, 68, 0.15); color: var(--aviator-error-red); border: 1px solid rgba(239, 68, 68, 0.4); }
        @media (max-width: 600px) { #aviator-content .container { padding: 15px 0; } #aviator-content h1 { font-size: 1.6rem; } #aviator-content .prediction-main .value { font-size: 2.8rem; } #aviator-content .input-wrapper { flex-direction: column; align-items: stretch; } #aviator-content .submit-btn { width: 100%; } #aviator-content .stats-grid { grid-template-columns: repeat(auto-fit, minmax(90px, 1fr)); } #aviator-content .btn { padding: 12px 20px; font-size: 0.9rem; } #aviator-content .action-buttons { gap: 12px; } }
        @media (max-width: 400px) { #aviator-content h1 { font-size: 1.4rem; } #aviator-content .prediction-main .value { font-size: 2.2rem; } #aviator-content .sub-predictions { grid-template-columns: 1fr; } #aviator-content .stats-grid { grid-template-columns: repeat(2, 1fr); } #aviator-content .btn { width: 100%; } #aviator-content .action-buttons { flex-direction: column; } }
        /* --- END Aviator V13 Theme Styles --- */

    </style>
</head>
<body class="text-white relative bg-blue-950">
    <div id="particles-js" class="fixed inset-0 z-[-1]"></div>

    <header class="predict-wingo-section py-4 text-center relative z-10"> <h1 class="text-3xl md:text-4xl lg:text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 via-red-500 to-pink-500 animate-gradient-x"> PREDICT VIP </h1> <div class="mt-1 text-sm md:text-base text-blue-200 font-semibold"> Optimized Predictions (Wingo Auto / Aviator AI / Mines Predictor) </div> </header>
    <nav class="main-tabs flex justify-between items-center sticky top-0 z-20 px-1 md:px-4"> <div class="flex-grow overflow-x-auto whitespace-nowrap py-1 scrollbar-thin"> <div class="flex justify-start sm:justify-center space-x-1"> <button class="tab-button active" data-tab="homepage">Homepage</button> <button class="tab-button" data-tab="prediction">Wingo</button> <button class="tab-button" data-tab="aviator">Aviator</button> <button class="tab-button" data-tab="mines">Mines</button> <button class="tab-button" data-tab="about">About tool</button> </div> </div> <div class="flex items-center space-x-2 md:space-x-4 pl-2 flex-shrink-0"> <a href="https://wa.me/916290530153" target="_blank" rel="noopener noreferrer" title="WhatsApp" class="text-blue-300 hover:text-white transition duration-200"> <i class="fa-brands fa-whatsapp text-lg md:text-2xl"></i> </a> <a href="mailto:vippredictking@zohomail.in" title="Email" class="text-blue-300 hover:text-white transition duration-200"> <i class="fa-solid fa-envelope text-lg md:text-2xl"></i> </a> </div> </nav>
    <main class="container mx-auto px-4 py-4 relative z-10"> <div id="tab-content-container"> <div id="homepage-content" class="tab-content"> <h2 class="text-2xl font-semibold text-yellow-400 mb-2 text-center">Welcome to Predict VIP</h2> <p class="text-center text-base md:text-lg text-blue-200 mb-4">Select a tab to navigate and explore our optimized tools.</p> <div class="mt-4 grid grid-cols-1 md:grid-cols-3 gap-4 text-center"> <div class="bg-blue-900/10 p-3 rounded-lg border border-blue-700/50 transform hover:scale-105 transition duration-300"> <i class="fas fa-chart-line text-3xl text-yellow-400 mb-2"></i> <h3 class="text-lg font-semibold text-white mb-1">Wingo Auto-Predictions</h3> <p class="text-blue-200 text-xs md:text-sm">Start the auto predictor with Hybrid Model.</p> </div> <div class="bg-blue-900/10 p-3 rounded-lg border border-blue-700/50 transform hover:scale-105 transition duration-300"> <i class="fas fa-plane-departure text-3xl text-cyan-400 mb-2"></i> <h3 class="text-lg font-semibold text-white mb-1">Aviator AI Analysis</h3> <p class="text-blue-200 text-xs md:text-sm">Input rounds for AI-powered insights.</p> </div> <div class="bg-blue-900/10 p-3 rounded-lg border border-blue-700/50 transform hover:scale-105 transition duration-300"> <i class="fas fa-bomb text-3xl text-green-400 mb-2"></i> <h3 class="text-lg font-semibold text-white mb-1">Mines Predictor</h3> <p class="text-blue-200 text-xs md:text-sm">Predict safe tiles for Mines game.</p> </div> </div> </div> <div id="prediction-content" class="tab-content tab-hidden"> <section class="container mx-auto px-4 py-8 relative text-center"> <h2 class="text-2xl font-semibold text-yellow-400 mb-4">Wingo Auto Predictor (1min)</h2> <div class="flex flex-wrap justify-center items-center gap-3 mb-6"> <button id="start-prediction-button" class="bg-yellow-400 hover:bg-yellow-500 text-blue-900 rounded-full px-8 py-3 font-bold text-lg md:text-xl button shadow-lg"> Start Prediction </button> </div> <p class="text-center text-blue-200 text-sm md:text-base mt-2">Click above to start predictions with Hybrid Model.</p> <p id="api-status-message" class="text-sm text-red-400 mt-2 tab-hidden"></p> <p class="text-center text-xs text-slate-400 mt-4">Note: Uses Hybrid Model with real-time data. Accuracy not guaranteed.</p> </section> </div> <div id="aviator-content" class="tab-content tab-hidden"> <div class="container"> <h1><i class="fa-solid fa-plane"></i> Aviator Predictor V13</h1> <p class="disclaimer">AI-powered analysis with insights. Past results do not guarantee future outcomes.</p> <div class="input-area"> <label for="round_input"><i class="fa-solid fa-keyboard"></i> Enter Last Round Multiplier:</label> <div class="input-wrapper"> <input type="number" id="round_input" placeholder="e.g., 2.53" step="0.01" min="1.00" aria-label="Enter multiplier value" required> <button class="submit-btn" id="aviator-submit-btn"><i class="fa-solid fa-check"></i> Submit</button> </div> <div class="input-hint">Type value and press Enter or click Submit</div> <div id="input-error" class="status-error"></div> </div> <div class="prediction-main" style="display: none;"> <div class="label">AI-Predicted Multiplier</div> <div class="value" id="likely-multiplier">--.--x</div> <div id="confidence-score">Confidence: Safe - 0%, High - 0%</div> </div> <div class="sub-predictions" style="display: none;"> <div class="prediction"> <strong><i class="fa-solid fa-shield-halved"></i> Safe Range</strong> <span id="safe_range">1.00x - 2.00x</span> </div> <div class="prediction"> <strong><i class="fa-solid fa-arrow-trend-up"></i> High Range</strong> <span id="high_range">Need 10 more</span> </div> </div> <div class="ai-analysis" style="display: none;"> <h3>AI Analysis</h3> <p id="ai-analysis-text">Enter 10 rounds to see AI-driven insights.</p> </div> <div class="stats-last-10" style="display: none;"> <h3>Round Analysis (Last 10)</h3> <div class="stats-grid"> <div class="stat-item"><span class="label">Average</span><span class="value" id="avg-last-10">--</span></div> <div class="stat-item"><span class="label">< 2.0x</span><span class="value" id="below-2x-last-10">--%</span></div> <div class="stat-item"><span class="label">>= 5.0x</span><span class="value" id="above-5x-last-10">--%</span></div> <div class="stat-item"><span class="label">Highest</span><span class="value" id="high-last-10">--</span></div> <div class="stat-item"><span class="label">Lowest</span><span class="value" id="low-last-10">--</span></div> </div> <canvas id="multiplierChart"></canvas> </div> <div class="history-section"> <label><i class="fa-solid fa-clock-rotate-left"></i> Last 10 Rounds:</label> <p id="history">No data yet. Enter rounds above.</p> </div> <div class="action-buttons"> <button class="btn reset-btn" id="aviator-reset-btn"><i class="fa-solid fa-trash-can"></i> Clear Data</button> <button class="btn export-btn" id="aviator-export-btn"><i class="fa-solid fa-download"></i> Export Data</button> </div> <p id="status" class="status-inactive">Enter 10 rounds for full AI analysis.</p> </div> </div> <div id="mines-content" class="tab-content tab-hidden"> <div class="mines-container"> <div class="text-center mb-4"> <h1 class="text-xl md:text-2xl font-semibold text-green-400 mb-1"> <i class="fa-solid fa-bomb mr-2"></i>Mines Predictor </h1> <p class="text-sm text-slate-400">Predict safe tiles.</p> </div> <div class="mines-controls mb-3"> <label for="minesCountInput">Mines:</label> <input type="number" id="minesCountInput" min="1" max="24" value="3"> <button id="minesPredictBtn" class="mines-predict-btn flex items-center gap-2 text-white font-medium text-sm shadow hover:shadow-md"> <i class="fa-solid fa-search fa-fw"></i> <span>Predict</span> </button> </div> <p id="minesErrorMsg" class="mines-error"></p> <div id="minesGrid" class="mines-grid mt-3 mb-3"></div> <div id="minesPredictionSummary" class="mines-prediction-summary tab-hidden"> <strong>Prediction:</strong><br> <span id="minesSafePredictionText"></span><br> <span id="minesMinePredictionText"></span> </div> </div> </div> <div id="about-content" class="tab-content tab-hidden"> <h2 class="text-2xl font-semibold text-yellow-400 mb-3 text-center">About Predict VIP</h2> <div class="max-w-3xl mx-auto text-center text-blue-200 space-y-3"> <p>Predict VIP uses algorithms (Hybrid Model, AI Analysis, Pattern Following) for analysis & predictions.</p> <p><strong class="text-white">Wingo:</strong> Auto-prediction (1 Min) using Hybrid Model.</p> <p><strong class="text-white">Aviator:</strong> AI-powered prediction & analysis based on the last 10 rounds entered manually.</p> <p><strong class="text-white">Mines:</strong> Predicts safe/risky tiles based on history.</p> <p class="text-sm text-slate-400 mt-4"> <strong class="text-red-400">Disclaimer:</strong> Predictions and analyses **do not guarantee winnings**. Games involve chance. Use tools responsibly as analytical aids. Manage funds wisely. </p> <p class="text-center text-xs text-slate-500 pt-2"> Tool Version: <span id="script-version-display">...</span> </p> </div> </div> </div> </main>
    <div id="win-menu-container" class="popup-container tab-hidden"> <div class="popup-content"> <button id="close-win-menu" class="close-popup" aria-label="Close Prediction Menu">×</button> <h2 class="text-xl font-bold mb-2 text-yellow-400">AUTO PREDICTION (1 Min)</h2> <div class="period-countdown-grid grid grid-cols-2 gap-4 mb-1 text-center"> <div> <p class="text-sm text-blue-200">Next Period</p> <p id="next-period-display" class="text-lg font-bold text-white">-</p> </div> <div> <p class="text-sm text-blue-200">Countdown</p> <p id="win-timer-value" class="text-lg font-bold text-yellow-400">--:--</p> </div> </div> <div id="prediction-display" class="mb-1 bg-blue-900/60 p-2 rounded text-center flex justify-center items-center space-x-2"> <span class="text-sm text-blue-200 flex-shrink-0">Prediction:</span> <span id="prediction-output" class="text-lg font-bold text-white">-</span> </div> <div class="stats-display-container flex justify-between items-center text-xs sm:text-sm mb-1 bg-blue-900/60 p-1 px-2 rounded"> <span class="whitespace-nowrap">Wins: <span id="stat-wins" class="font-bold text-green-400">0</span></span> <span class="whitespace-nowrap">Losses: <span id="stat-losses" class="font-bold text-red-400">0</span></span> <span class="whitespace-nowrap">Acc: <span id="stat-accuracy" class="font-bold text-white">0.0%</span></span> <span class="whitespace-nowrap">Rev: <span id="stat-reverse" class="font-bold text-slate-300">OFF</span></span> </div> <div class="prediction-history"> <h3 class="text-base font-bold mb-1 text-yellow-400">Period History (Last 10)</h3> <table class="history-table" id="history-list"> <thead> <tr> <th>Period</th> <th>Predict (B/S)</th> <th>Predict (Color)</th> <th>Status</th> </tr> </thead> <tbody> <tr><td colspan="4" class="text-center p-4 text-slate-400">Loading history...</td></tr> </tbody> </table> </div> </div> </div>
    <div id="canvas-container" class="popup-container tab-hidden"> <canvas id="prediction-chart" aria-label="Prediction Chart"></canvas> <button id="close-canvas" aria-label="Close Chart">Close</button> </div>

    <script>
        /**
         * Predict VIP - Optimized Hybrid Model Script
         * Version: 2.19 (Aviator Transparent Container & Error Box Fix)
         */
        (function() {
            const SCRIPT_VERSION = "2.19"; // *** Updated Script Version ***

            // --- All JavaScript logic from v2.18 goes here ---
            // (No changes needed to the JavaScript for the transparency/error box fix)
             document.addEventListener('DOMContentLoaded', () => {
                console.log(`Initializing Predict VIP Script v${SCRIPT_VERSION}...`);
                const versionDisplayElement = document.getElementById('script-version-display');
                if (versionDisplayElement) { versionDisplayElement.textContent = SCRIPT_VERSION; }
                else { console.warn("Version display element not found."); }
                try { if (typeof particlesJS === 'function') { particlesJS('particles-js', { particles: { number: { value: 50, density: { enable: true, value_area: 800 } }, color: { value: "#ffffff" }, shape: { type: "circle" }, opacity: { value: 0.2, random: true, anim: { enable: true, speed: 0.5, opacity_min: 0.05, sync: false } }, size: { value: 1.5, random: true }, line_linked: { enable: true, distance: 150, color: "#ffffff", opacity: 0.3, width: 1 }, move: { enable: true, speed: 3, direction: "none", random: false, straight: false, out_mode: "out", bounce: false } }, interactivity: { detect_on: "canvas", events: { onhover: { enable: true, mode: "repulse" }, onclick: { enable: false }, resize: true }, modes: { repulse: { distance: 80, duration: 0.4 }, grab: { distance: 140, line_linked: { opacity: 1 } } } }, retina_detect: true }); } else { console.warn("particlesJS library not found."); } } catch (e) { console.error("Particle.js error:", e); }
                const body = document.body; const tabButtons = document.querySelectorAll('.tab-button'); const tabContents = document.querySelectorAll('.tab-content'); const canvasContainer = document.getElementById('canvas-container'); const predictionChartCanvas = document.getElementById('prediction-chart'); const closeCanvasBtn = document.getElementById('close-canvas'); let chartInstance = null; let aviatorInitialized = false; let minesInitialized = false;
                const WINGO_API_URL = "https://api.bdg88zf.com/api/webapi/GetNoaverageEmerdList"; const WINGO_GAME_TYPE_ID = 1; const WINGO_COUNTDOWN_START = 60; const WINGO_FETCH_INTERVAL_NEAR_END = 3; const WINGO_FETCH_INTERVAL_MID = 30; const WINGO_HISTORY_LIMIT = 15; const WINGO_DISPLAY_HISTORY_LIMIT = 10; const WINGO_REVERSE_LOSS_THRESHOLD = 2; const startPredictionButton = document.getElementById('start-prediction-button'); const winMenuContainer = document.getElementById('win-menu-container'); const closeWinMenuButton = document.getElementById('close-win-menu'); const nextPeriodDisplayElement = document.getElementById('next-period-display'); const timerElement = document.getElementById('win-timer-value'); const predictionOutputElement = document.getElementById('prediction-output'); const historyListBody = document.getElementById('history-list')?.querySelector('tbody'); const statWinsEl = document.getElementById('stat-wins'); const statLossesEl = document.getElementById('stat-losses'); const statAccuracyEl = document.getElementById('stat-accuracy'); const statReverseEl = document.getElementById('stat-reverse'); const apiStatusMessageEl = document.getElementById('api-status-message'); let wingoPredictionHistory = []; let wingoTotalWins = 0; let wingoTotalLosses = 0; let wingoLastFetchedPeriod = null; let wingoConsecutiveLosses = 0; let wingoIsReversed = false; let wingoCountdown = WINGO_COUNTDOWN_START; let wingoTimerInterval = null;
                function calculateMovingAverage(h, p = 5) { if (!Array.isArray(h) || h.length < p) return 0; const r = h.slice(-p).map(i => parseInt(i.result)).filter(n => !isNaN(n)); if (r.length === 0) return 0; return r.reduce((a, b) => a + b, 0) / r.length; }
                function statisticalProbability(h) { const d = { big: 0.5, small: 0.5, red: 0.5, green: 0.5, violet: 0.05 }; if (!Array.isArray(h) || !h.length) return d; const c = h.filter(x => x.status === "WIN" || x.status === "LOSS"); if (!c.length) return d; const bC = c.filter(x => getResultType(x.result) === "BIG").length; const sC = c.filter(x => getResultType(x.result) === "SMALL").length; const bT = bC + sC; const rC = c.filter(x => getResultColor(x.result) === "RED").length; const gC = c.filter(x => getResultColor(x.result) === "GREEN").length; const vC = c.filter(x => getResultColor(x.result) === "VIOLET").length; const cT = rC + gC + vC; return { big: bT > 0 ? bC / bT : 0.5, small: bT > 0 ? sC / bT : 0.5, red: cT > 0 ? rC / cT : 0.5, green: cT > 0 ? gC / cT : 0.5, violet: cT > 0 ? vC / cT : 0.05 }; }
                function timeSeriesTrend(h) { if (!Array.isArray(h) || h.length < 3) return "BIG"; const r = h.slice(-3).map(x => getResultType(x.result)); if (r.some(x => x === "")) return "BIG"; const bS = r.filter(p => p === "BIG").length; return bS >= 2 ? "SMALL" : "BIG"; }
                function getHybridPrediction(h) { const p = statisticalProbability(h); const m = calculateMovingAverage(h); const t = timeSeriesTrend(h); let bS = p.big * 0.4 + (m >= 5 ? 1 : 0) * 0.3 + (t === 'BIG' ? 1 : 0) * 0.3; const bP = bS > 0.5 ? "BIG" : "SMALL"; const fP = wingoIsReversed ? (bP === "BIG" ? "SMALL" : "BIG") : bP; let cP = "GREEN"; if (p.red > p.green) cP = "RED"; return { prediction: fP, colorPrediction: cP }; }
                function getResultType(n) { const N = parseInt(n, 10); return isNaN(N) ? "" : (N === 0 || N === 5) ? "VIOLET" : (N > 5 ? "BIG" : "SMALL"); }
                function getResultColor(n) { const N = parseInt(n, 10); if (isNaN(N)) return ""; if (N === 0) return "VIOLET_RED"; if (N === 5) return "VIOLET_GREEN"; return N % 2 === 0 ? "RED" : "GREEN"; }
                function updateWingoStats() { wingoTotalWins = wingoPredictionHistory.filter(i => i.status === "WIN").length; wingoTotalLosses = wingoPredictionHistory.filter(i => i.status === "LOSS").length; const t = wingoTotalWins + wingoTotalLosses; const a = t > 0 ? (wingoTotalWins / t) * 100 : 0; if (statWinsEl) statWinsEl.textContent = wingoTotalWins; if (statLossesEl) statLossesEl.textContent = wingoTotalLosses; if (statAccuracyEl) statAccuracyEl.textContent = a.toFixed(1) + '%'; if (statReverseEl) { statReverseEl.textContent = wingoIsReversed ? "ON" : "OFF"; statReverseEl.style.color = wingoIsReversed ? '#fde047' : '#cbd5e1'; } }
                function updateWingoHistoryTable() { if (!historyListBody) return; const lH = wingoPredictionHistory.slice(0, WINGO_DISPLAY_HISTORY_LIMIT); historyListBody.innerHTML = lH.length ? lH.map(item => { let s = item.status || 'Pending'; let cT = item.colorPrediction || '-'; let bT = item.prediction || '-'; let aT = item.result ? getResultType(item.result) : null; let aC = item.result ? getResultColor(item.result).replace('VIOLET_', '') : null; let bM = item.result && s !== 'Pending' && item.prediction === aT && aT !== 'VIOLET'; let bI = ''; if (s !== 'Pending' && item.result) bI = bM ? ' <i class="fas fa-check text-green-400"></i>' : ' <i class="fas fa-times text-red-400"></i>'; let cM = item.result && s !== 'Pending' && item.colorPrediction === aC; let cI = ''; if (s !== 'Pending' && item.result) cI = cM ? ' <i class="fas fa-check text-green-400"></i>' : ' <i class="fas fa-times text-red-400"></i>'; let rC = `history-item ${s.toLowerCase()}`; let dS = ''; switch (item.colorPrediction?.toLowerCase()) { case 'red': dS = 'background: #ef4444;'; break; case 'green': dS = 'background: #22c55e;'; break; case 'violet': dS = 'background: #a855f7;'; break; default: dS = 'background: grey;'; } return `<tr class="${rC}"><td>${item.period || '-'}</td><td>${bT}${bI}</td><td><span class="color-dot" style="${dS}"></span>${cT}${cI}</td><td><div class="status-box">${s}</div></td></tr>`; }).join('') : `<tr><td colspan="4" class="text-center p-4 text-slate-400">No history yet...</td></tr>`; }
                function showApiError(m) { const uM = m || "Failed to fetch game data."; console.error("API Error:", uM); if (predictionOutputElement && winMenuContainer && !winMenuContainer.classList.contains('tab-hidden')) { predictionOutputElement.innerHTML = `<span class="text-red-400 text-sm">${uM}</span>`; } else if (apiStatusMessageEl && document.getElementById('prediction-content')?.classList.contains('tab-hidden') === false) { apiStatusMessageEl.textContent = uM; apiStatusMessageEl.classList.remove('tab-hidden'); } }
                function hideApiError() { if (apiStatusMessageEl) { apiStatusMessageEl.textContent = ''; apiStatusMessageEl.classList.add('tab-hidden'); } if (predictionOutputElement && predictionOutputElement.querySelector('.text-red-400')) { predictionOutputElement.innerHTML = '-'; } }
                async function fetchWingoGameResult(full = false) { const url = WINGO_API_URL; const p = { pageSize: 10, pageNo: 1, typeId: WINGO_GAME_TYPE_ID, language: 0, random: "4a0522c6ecd8410496260e686be2a57c", signature: "334B5E70A0C9B8918B0B15E517E2069C", timestamp: Math.floor(Date.now() / 1000) }; try { hideApiError(); const r = await fetch(url, { method: "POST", headers: { "Content-Type": "application/json" }, body: JSON.stringify(p) }); if (!r.ok) { console.error(`API HTTP Error: ${r.status} - ${r.statusText}`); throw new Error(`Network response was not ok (${r.status})`); } const d = await r.json(); if (d?.code !== 0 || !d?.data?.list || !Array.isArray(d.data.list)) { console.warn("API response format unexpected:", d); let e = "Unexpected API response format"; if(d?.code !== 0) e += ` (Code: ${d?.code})`; if(!d?.data?.list) e += " - Missing data list."; throw new Error(e); } if (d.data.list.length === 0) { console.warn("API returned empty data list."); throw new Error("API returned empty data list."); } const l = d.data.list[0]; if (l?.issueNumber && l.number !== undefined && l.number !== null) { if (!full) { return { period: String(l.issueNumber), result: String(l.number) }; } else { return d; } } else { console.warn("Latest result data missing required fields:", l); throw new Error("API result data missing required fields."); } } catch (e) { console.error("fetchWingoGameResult Error:", e); if (e.message.includes("Network response was not ok")) { showApiError(`API Error: ${e.message}. Check network/server.`); } else if (e instanceof SyntaxError) { showApiError("API Error: Invalid response."); } else { showApiError(e.message || "Failed to fetch/process data."); } return null; } }
                function checkWingoWinLoss(list) { if (!Array.isArray(list) || list.length === 0) return false; let changed = false; list.forEach(res => { if (!res?.issueNumber || res.number === undefined || res.number === null) { console.warn("Skipping incomplete result:", res); return; } const pS = String(res.issueNumber); const rS = String(res.number); const hE = wingoPredictionHistory.find(i => i.period === pS && i.status === "Pending"); if (hE) { hE.result = rS; const aT = getResultType(rS); hE.status = (hE.prediction === aT && aT !== 'VIOLET') ? "WIN" : "LOSS"; const latestComp = wingoPredictionHistory.filter(p => p.status !== 'Pending').map(p => BigInt(p.period || 0)).reduce((max, cur) => (cur > max ? cur : max), 0n); if (BigInt(pS) >= latestComp) { if (hE.status === "LOSS") { wingoConsecutiveLosses++; if (wingoConsecutiveLosses >= WINGO_REVERSE_LOSS_THRESHOLD && !wingoIsReversed) { wingoIsReversed = true; console.log(`Reverse ON after period ${pS}`); } } else { if (wingoIsReversed) { wingoIsReversed = false; console.log(`Reverse OFF after period ${pS}`); } wingoConsecutiveLosses = 0; } } changed = true; } }); if (changed) { console.log("Updating UI after batch process."); updateWingoStats(); updateWingoHistoryTable(); } return changed; }
                async function fetchAndProcessWingoData() { const resp = await fetchWingoGameResult(true); if (!resp || !resp.data || !resp.data.list) { if (timerElement) timerElement.textContent = 'Error'; return false; } const dataList = resp.data.list; const latestRes = dataList[0]; checkWingoWinLoss(dataList); const latestP = String(latestRes.issueNumber); if (latestP !== wingoLastFetchedPeriod) { console.log(`New latest period: ${latestP}`); wingoLastFetchedPeriod = latestP; wingoCountdown = WINGO_COUNTDOWN_START; const nextP = (BigInt(latestP) + 1n).toString(); const { prediction, colorPrediction } = getHybridPrediction(wingoPredictionHistory); if (nextPeriodDisplayElement) nextPeriodDisplayElement.textContent = nextP; if (predictionOutputElement) { const html = `<span class="${prediction.toLowerCase()}">${prediction}</span> / <span class="${colorPrediction.toLowerCase()}">${colorPrediction}</span>`; predictionOutputElement.innerHTML = html; } if (!wingoPredictionHistory.some(i => i.period === nextP)) { wingoPredictionHistory.unshift({ period: nextP, prediction: prediction, colorPrediction: colorPrediction, result: null, status: "Pending" }); if (wingoPredictionHistory.length > WINGO_HISTORY_LIMIT) wingoPredictionHistory = wingoPredictionHistory.slice(0, WINGO_HISTORY_LIMIT); updateWingoHistoryTable(); } updateWingoStats(); } return true; }
                function wingoTick() { if (wingoCountdown <= 0) { wingoCountdown = 0; fetchAndProcessWingoData(); } if (timerElement) { const m = Math.floor(wingoCountdown / 60).toString().padStart(2, '0'); const s = (wingoCountdown % 60).toString().padStart(2, '0'); timerElement.textContent = `${m}:${s}`; } if (wingoTimerInterval && (wingoCountdown <= WINGO_FETCH_INTERVAL_NEAR_END || wingoCountdown === WINGO_FETCH_INTERVAL_MID)) fetchAndProcessWingoData(); if (wingoCountdown > 0) wingoCountdown--; }
                function startAutoPredictionLoop() { stopAutoPredictionLoop(); console.log("Starting Wingo loop..."); wingoPredictionHistory = []; wingoTotalWins = 0; wingoTotalLosses = 0; wingoLastFetchedPeriod = null; wingoConsecutiveLosses = 0; wingoIsReversed = false; wingoCountdown = WINGO_COUNTDOWN_START; updateWingoStats(); updateWingoHistoryTable(); if (predictionOutputElement) predictionOutputElement.innerHTML = '<span class="text-sm text-slate-400">Fetching...</span>'; if (nextPeriodDisplayElement) nextPeriodDisplayElement.textContent = '-'; if (timerElement) timerElement.textContent = '01:00'; fetchAndProcessWingoData().then(s => { if (s && !wingoTimerInterval) { wingoTimerInterval = setInterval(wingoTick, 1000); console.log("Timer started."); } else if (!s) { console.error("Initial fetch failed."); if (timerElement) timerElement.textContent = 'Error'; } }); }
                function stopAutoPredictionLoop() { if (wingoTimerInterval) { clearInterval(wingoTimerInterval); wingoTimerInterval = null; console.log("Stopped Wingo loop."); if (timerElement) timerElement.textContent = '--:--'; } }
                if (startPredictionButton) { startPredictionButton.addEventListener('click', () => { if (winMenuContainer) winMenuContainer.classList.remove('tab-hidden'); startPredictionButton.classList.add('tab-hidden'); body.classList.add('overflow-hidden'); hideApiError(); startAutoPredictionLoop(); }); } else { console.error("Start Button not found!"); }
                if (closeWinMenuButton) { closeWinMenuButton.addEventListener('click', () => { stopAutoPredictionLoop(); if (winMenuContainer) winMenuContainer.classList.add('tab-hidden'); if (startPredictionButton) startPredictionButton.classList.remove('tab-hidden'); body.classList.remove('overflow-hidden'); }); } else { console.error("Close Button not found!"); }
                const MINES_HISTORY_KEY = 'minesPredictorHistory_v7'; const MINES_HISTORY_LIMIT = 150; const MINES_GRID_SIZE = 25; const MINES_MIN_HISTORY_FOR_PATTERN = 5; const MINES_DEFAULT_COUNT = 3; const MINES_PREDICT_SAFE_COUNT = 7; const minesGrid = document.getElementById('minesGrid'); const minesCountInput = document.getElementById('minesCountInput'); const minesPredictBtn = document.getElementById('minesPredictBtn'); const minesPredictionSummary = document.getElementById('minesPredictionSummary'); const minesSafePredictionText = document.getElementById('minesSafePredictionText'); const minesMinePredictionText = document.getElementById('minesMinePredictionText'); const minesErrorMsg = document.getElementById('minesErrorMsg'); let minesPredictorHistory = []; let minesRevealedTiles = []; let minesCount = MINES_DEFAULT_COUNT;
                try { const savedMinesHistory = localStorage.getItem(MINES_HISTORY_KEY); if (savedMinesHistory) { minesPredictorHistory = JSON.parse(savedMinesHistory); console.log(`Loaded ${minesPredictorHistory.length} mines history entries.`); } else { console.log("No Mines history found."); } } catch (e) { console.error("Error loading Mines history:", e); minesPredictorHistory = []; }
                function initMinesPredictor() { if (!minesGrid || !minesPredictBtn || !minesCountInput || !minesErrorMsg || !minesPredictionSummary) { console.error("Mines elements missing."); if (minesErrorMsg) minesErrorMsg.textContent = "Init error."; minesInitialized = false; return; } createMinesGrid(); minesPredictBtn.addEventListener('click', runMinesPrediction); console.log("Mines Initialized."); minesInitialized = true; if (minesPredictorHistory.length > 0) { runMinesPrediction(); } else { resetMinesGridVisuals(); if(minesPredictionSummary) minesPredictionSummary.classList.add('tab-hidden'); } }
                function createMinesGrid() { if (!minesGrid) return; minesGrid.innerHTML = ''; for (let i = 0; i < MINES_GRID_SIZE; i++) { const tile = document.createElement('div'); tile.className = 'mines-tile'; tile.dataset.index = i; minesGrid.appendChild(tile); } }
                function updateMinesPredictorHistory(t, r) { if (minesPredictorHistory.length >= MINES_HISTORY_LIMIT) minesPredictorHistory.shift(); minesPredictorHistory.push({ tile: t, result: r, timestamp: Date.now() }); try { localStorage.setItem(MINES_HISTORY_KEY, JSON.stringify(minesPredictorHistory)); } catch (e) { console.error("Error saving Mines history:", e); if (minesErrorMsg) minesErrorMsg.textContent = "Save error."; } }
                function analyzeMinesPatterns() { let mF = new Array(MINES_GRID_SIZE).fill(0); let sF = new Array(MINES_GRID_SIZE).fill(0); const rH = minesPredictorHistory.slice(-50); rH.forEach(h => { if (h.tile !== undefined && h.tile >= 0 && h.tile < MINES_GRID_SIZE) { if (h.result === 'mine') { mF[h.tile]++; getMinesNeighbors(h.tile).forEach(n => mF[n] += 0.2); } else { sF[h.tile]++; getMinesNeighbors(h.tile).forEach(n => sF[n] += 0.1); } } }); let l = new Array(MINES_GRID_SIZE).fill(0); for (let i = 0; i < MINES_GRID_SIZE; i++) l[i] = mF[i] - (sF[i] * 0.5); return l; }
                function getMinesNeighbors(t) { let N = []; const gS = 5; const r = Math.floor(t / gS), c = t % gS; for (let dr = -1; dr <= 1; dr++) { for (let dc = -1; dc <= 1; dc++) { if (dr === 0 && dc === 0) continue; let nr = r + dr, nc = c + dc; if (nr >= 0 && nr < gS && nc >= 0 && nc < gS) N.push(nr * gS + nc); } } return N; }
                function predictMinesSafestAndRiskiest(l) { const tWL = l.map((s, i) => ({ index: i, score: s })).filter(t => !minesRevealedTiles.includes(t.index)); tWL.sort((a, b) => a.score - b.score); const pS = tWL.slice(0, MINES_PREDICT_SAFE_COUNT).map(t => t.index + 1); const nR = Math.max(3, minesCount); const pR = tWL.slice(-nR).map(t => t.index + 1); return { predictedSafe: pS, predictedRisky: pR }; }
                function runMinesPrediction() { if (!minesErrorMsg || !minesCountInput || !minesGrid || !minesSafePredictionText || !minesMinePredictionText || !minesPredictionSummary) return; minesErrorMsg.textContent = ''; resetMinesGridVisuals(); minesRevealedTiles = []; try { minesCount = parseInt(minesCountInput.value); if (isNaN(minesCount) || minesCount < 1 || minesCount > MINES_GRID_SIZE - 1) { minesErrorMsg.textContent = `Mines (1-${MINES_GRID_SIZE - 1}).`; return; } } catch(e) { minesErrorMsg.textContent = "Invalid mines number."; return; } let pS = [], pR = [], pT = ""; try { if (minesPredictorHistory.length >= MINES_MIN_HISTORY_FOR_PATTERN) { pT = "Pattern Based"; const l = analyzeMinesPatterns(); const p = predictMinesSafestAndRiskiest(l); pS = p.predictedSafe; pR = p.predictedRisky; } else { pT = `Random (${MINES_MIN_HISTORY_FOR_PATTERN - minesPredictorHistory.length} needed)`; const aI = Array.from({ length: MINES_GRID_SIZE }, (_, i) => i); const sI = aI.sort(() => 0.5 - Math.random()); pS = sI.slice(0, MINES_PREDICT_SAFE_COUNT).map(i => i + 1); const rI = sI.slice(MINES_PREDICT_SAFE_COUNT); pR = rI.slice(0, Math.max(3, minesCount)).map(i => i + 1); } } catch (e) { console.error("Mines prediction error:", e); minesErrorMsg.textContent = "Prediction error."; return; } if (!minesGrid || minesGrid.children.length !== MINES_GRID_SIZE) { minesErrorMsg.textContent = "Grid error."; return; } pS.forEach(idx => { const i = idx - 1; if (i >= 0 && i < MINES_GRID_SIZE && minesGrid.children[i]) minesGrid.children[i].classList.add('predicted-safe'); }); pR.forEach(idx => { const i = idx - 1; if (i >= 0 && i < MINES_GRID_SIZE && minesGrid.children[i]) { if (!minesGrid.children[i].classList.contains('predicted-safe')) minesGrid.children[i].classList.add('predicted-mine'); } }); minesSafePredictionText.textContent = `Safe: ${pS.join(', ')}`; minesMinePredictionText.textContent = `Mine?: ${pR.join(', ')} (${pT})`; minesPredictionSummary.classList.remove('tab-hidden'); }
                function resetMinesGridVisuals() { if (!minesGrid) return; Array.from(minesGrid.children).forEach(t => { if(t) t.className = 'mines-tile'; }); if (minesSafePredictionText) minesSafePredictionText.textContent = ''; if (minesMinePredictionText) minesMinePredictionText.textContent = ''; if (minesPredictionSummary) minesPredictionSummary.classList.add('tab-hidden'); if (minesErrorMsg) minesErrorMsg.textContent = ''; }
                const AVIATOR_MAX_HISTORY = 10; const AVIATOR_LOCAL_STORAGE_KEY = 'aviatorPredictorDataV13'; const aviatorRoundInput = document.getElementById('round_input'); const aviatorHistoryEl = document.getElementById('history'); const aviatorStatusEl = document.getElementById('status'); const aviatorInputErrorEl = document.getElementById('input-error'); const aviatorLikelyMultEl = document.getElementById('likely-multiplier'); const aviatorSafeRangeEl = document.getElementById('safe_range'); const aviatorHighRangeEl = document.getElementById('high_range'); const aviatorConfidenceEl = document.getElementById('confidence-score'); const aviatorAiAnalysisEl = document.getElementById('ai-analysis-text'); const aviatorAvgLast10El = document.getElementById('avg-last-10'); const aviatorBelow2xLast10El = document.getElementById('below-2x-last-10'); const aviatorAbove5xLast10El = document.getElementById('above-5x-last-10'); const aviatorHighLast10El = document.getElementById('high-last-10'); const aviatorLowLast10El = document.getElementById('low-last-10'); const aviatorPredictionMain = document.querySelector('#aviator-content .prediction-main'); const aviatorSubPredictions = document.querySelector('#aviator-content .sub-predictions'); const aviatorAiAnalysisSection = document.querySelector('#aviator-content .ai-analysis'); const aviatorStatsLast10 = document.querySelector('#aviator-content .stats-last-10'); const aviatorSubmitBtn = document.getElementById('aviator-submit-btn'); const aviatorResetBtn = document.getElementById('aviator-reset-btn'); const aviatorExportBtn = document.getElementById('aviator-export-btn'); const aviatorChartCanvas = document.getElementById('multiplierChart'); let aviatorRoundData = []; let aviatorChartInstance = null;
                function initAviatorV13Analyzer() { console.log("Attempting to initialize Aviator V13..."); const req = [ aviatorRoundInput, aviatorSubmitBtn, aviatorResetBtn, aviatorExportBtn, aviatorHistoryEl, aviatorStatusEl, aviatorInputErrorEl, aviatorLikelyMultEl, aviatorSafeRangeEl, aviatorHighRangeEl, aviatorConfidenceEl, aviatorAiAnalysisEl, aviatorAvgLast10El, aviatorBelow2xLast10El, aviatorAbove5xLast10El, aviatorHighLast10El, aviatorLowLast10El, aviatorPredictionMain, aviatorSubPredictions, aviatorAiAnalysisSection, aviatorStatsLast10, aviatorChartCanvas ]; if (req.some(el => !el)) { console.error("Aviator V13 elements missing. Cannot initialize properly."); if(aviatorStatusEl) updateAviatorStatus("Initialization Error: UI elements missing.", "error"); aviatorInitialized = false; const contentDiv = document.getElementById('aviator-content'); if(contentDiv && !contentDiv.querySelector('.init-error-message')) { const p = document.createElement('p'); p.textContent = "Error initializing Aviator tab components. Please refresh."; p.style.color = 'var(--aviator-error-red, red)'; p.style.textAlign = 'center'; p.className = 'init-error-message'; contentDiv.prepend(p); } return; } console.log("All Aviator V13 elements found. Adding listeners..."); aviatorRoundInput.addEventListener('keydown', handleAviatorInputKeyDown); aviatorSubmitBtn.addEventListener('click', processAviatorSingleInput); aviatorResetBtn.addEventListener('click', resetAviatorData); aviatorExportBtn.addEventListener('click', exportAviatorData); loadAviatorData(); console.log("Aviator V13 Initialized Successfully."); }
                function handleAviatorInputKeyDown(e) { if (e.key === 'Enter') { e.preventDefault(); processAviatorSingleInput(); } }
                function processAviatorSingleInput() { if (!aviatorRoundInput || !aviatorInputErrorEl) { console.error("Aviator input elements not found in processAviatorSingleInput"); return; } const v = aviatorRoundInput.value.trim(); aviatorInputErrorEl.innerText = ''; if (!v) { aviatorInputErrorEl.innerText = 'Please enter a multiplier.'; return; } const n = parseFloat(v); if (isNaN(n) || n < 1.00) { aviatorInputErrorEl.innerText = 'Enter a valid number >= 1.00.'; aviatorRoundInput.focus(); return; } addAviatorRoundData(n); aviatorRoundInput.value = ''; aviatorRoundInput.focus(); if (navigator.vibrate) { try { navigator.vibrate(50); } catch (e) { console.warn("Vibration failed:", e); } } }
                function addAviatorRoundData(v) { aviatorRoundData.push(v); if (aviatorRoundData.length > AVIATOR_MAX_HISTORY) { aviatorRoundData.shift(); } if (aviatorHistoryEl) { aviatorHistoryEl.innerText = aviatorRoundData.length ? aviatorRoundData.map(val => val.toFixed(2)).join(', ') : 'No data yet. Enter rounds above.'; } predictAviator(aviatorRoundData); saveAviatorData(); }
                function standardDeviation(v) { const n = v.length; if (n < 2) return 0; const m = v.reduce((s, val) => s + val, 0) / n; const variance = v.reduce((s, val) => s + Math.pow(val - m, 2), 0) / (n - 1); return Math.sqrt(variance); }
                function predictAviator(d) { if (!aviatorPredictionMain || !aviatorSubPredictions || !aviatorAiAnalysisSection || !aviatorStatsLast10 || !aviatorLikelyMultEl || !aviatorSafeRangeEl || !aviatorHighRangeEl || !aviatorConfidenceEl || !aviatorAiAnalysisEl) { console.error("Aviator prediction UI elements not found during prediction update."); updateAviatorStatus("UI Update Error.", "error"); return; } aviatorPredictionMain.style.display = 'none'; aviatorSubPredictions.style.display = 'none'; aviatorAiAnalysisSection.style.display = 'none'; aviatorStatsLast10.style.display = 'none'; if (d.length < AVIATOR_MAX_HISTORY) { const r = AVIATOR_MAX_HISTORY - d.length; aviatorLikelyMultEl.innerText = '--.--x'; aviatorSafeRangeEl.innerText = '1.00x - 2.00x'; aviatorHighRangeEl.innerText = `Need ${r} more`; aviatorConfidenceEl.innerText = 'Confidence: Safe - 0%, High - 0%'; aviatorAiAnalysisEl.innerText = `Enter ${r} more round${r > 1 ? 's' : ''} to see AI-driven insights.`; updateAviatorLast10Stats([]); if (aviatorChartInstance) { try { aviatorChartInstance.destroy(); aviatorChartInstance = null; } catch(e) { console.error("Error destroying Aviator chart:", e); } } updateAviatorStatus(`Enter ${r} more round${r > 1 ? 's' : ''}.`, 'inactive'); } else if (d.length === AVIATOR_MAX_HISTORY) { const avg = d.reduce((s, v) => s + v, 0) / d.length; const std = standardDeviation(d); const rAvg = d.slice(-3).reduce((s, v) => s + v, 0) / 3; const wAvg = rAvg * 0.6 + avg * 0.4; const sL = 1.00; const sU = 2.00; const cH = Math.max(sU + 0.01, wAvg + 0.5 * std); const hL = Math.max(2.01, parseFloat(cH.toFixed(2))); const cHU = Math.max(hL + 0.5, wAvg + 1.5 * std); const hU = parseFloat(cHU.toFixed(2)); const sC = d.filter(x => x >= sL && x <= sU).length; const hC = d.filter(x => x >= hL).length; const sConf = (sC / d.length) * 100; const hConf = (hC / d.length) * 100; let lM = wAvg + (std * 0.2); lM = Math.max(1.01, Math.min(50.00, lM)); aviatorPredictionMain.style.display = 'block'; aviatorSubPredictions.style.display = 'grid'; aviatorAiAnalysisSection.style.display = 'block'; aviatorStatsLast10.style.display = 'block'; aviatorSafeRangeEl.innerText = `${sL.toFixed(2)}x - ${sU.toFixed(2)}x`; aviatorHighRangeEl.innerText = `${hL.toFixed(2)}x - ${hU.toFixed(2)}x`; aviatorConfidenceEl.innerText = `Confidence: Safe - ${sConf.toFixed(0)}%, High - ${hConf.toFixed(0)}%`; aviatorLikelyMultEl.innerText = `${lM.toFixed(2)}x`; const tD = d.slice(-3); let trend = 'stable'; if (tD.length === 3) { const c1 = tD[1] - tD[0]; const c2 = tD[2] - tD[1]; if (c1 > 0.1 && c2 > 0.1) trend = 'increasing'; else if (c1 < -0.1 && c2 < -0.1) trend = 'decreasing'; } const vD = std > 2.0 ? 'very high' : std > 1.0 ? 'high' : std > 0.5 ? 'moderate' : 'low'; const aiTxt = `AI Prediction: ${lM.toFixed(2)}x. Analysis based on last ${AVIATOR_MAX_HISTORY} rounds:\n` + `• Recent Trend: ${trend}\n` + `• Confidence: Safe (${sL.toFixed(2)}x-${sU.toFixed(2)}x) -> ${sConf.toFixed(0)}%; High (${hL.toFixed(2)}x-${hU.toFixed(2)}x) -> ${hConf.toFixed(0)}%\n` + `• Volatility (Std Dev): ${std.toFixed(2)} (${vD})\n` + `• Insight: ${trend === 'increasing' ? 'Increasing trend suggests potential for higher multipliers, but risk also increases.' : trend === 'decreasing' ? 'Decreasing trend suggests caution; favouring the safe range might be prudent.' : 'Stable trend suggests multipliers may remain near the average.'} ${vD.includes('high') ? 'High volatility implies unpredictable swings.' : 'Low volatility suggests more consistent results near the average.'}`; aviatorAiAnalysisEl.innerText = aiTxt.replace(/\n/g, '\n'); updateAviatorStatus('AI analysis complete.', 'active'); updateAviatorLast10Stats(d); updateAviatorChart(); } }
                function updateAviatorLast10Stats(d) { if (!aviatorAvgLast10El || !aviatorBelow2xLast10El || !aviatorAbove5xLast10El || !aviatorHighLast10El || !aviatorLowLast10El) { console.error("Aviator stats UI elements not found."); return; } if (d.length === AVIATOR_MAX_HISTORY) { const avg = d.reduce((s, v) => s + v, 0) / d.length; const cB2 = d.filter(x => x < 2.0).length; const cA5 = d.filter(x => x >= 5.0).length; const h = Math.max(...d); const l = Math.min(...d); const pB2 = (cB2 / d.length * 100).toFixed(0); const pA5 = (cA5 / d.length * 100).toFixed(0); aviatorAvgLast10El.innerText = avg.toFixed(2) + 'x'; aviatorBelow2xLast10El.innerText = pB2 + '%'; aviatorAbove5xLast10El.innerText = pA5 + '%'; aviatorHighLast10El.innerText = h.toFixed(2) + 'x'; aviatorLowLast10El.innerText = l.toFixed(2) + 'x'; } else { aviatorAvgLast10El.innerText = '--'; aviatorBelow2xLast10El.innerText = '--%'; aviatorAbove5xLast10El.innerText = '--%'; aviatorHighLast10El.innerText = '--'; aviatorLowLast10El.innerText = '--'; } }
                function updateAviatorChart() { if (!aviatorChartCanvas) { console.error("Aviator chart canvas not found."); return; } const ctx = aviatorChartCanvas.getContext('2d'); if (!ctx) { console.error("Failed to get 2D context for Aviator chart."); return; } if (aviatorChartInstance) { try { aviatorChartInstance.destroy(); aviatorChartInstance = null; } catch(e) { console.error("Error destroying previous Aviator chart instance:", e); } } if (aviatorRoundData.length !== AVIATOR_MAX_HISTORY) { ctx.clearRect(0, 0, aviatorChartCanvas.width, aviatorChartCanvas.height); return; } try { aviatorChartInstance = new Chart(ctx, { type: 'line', data: { labels: aviatorRoundData.map((_, i) => `R${i + 1}`), datasets: [{ label: 'Multiplier History', data: aviatorRoundData, borderColor: 'var(--aviator-primary-accent)', backgroundColor: 'rgba(251, 191, 36, 0.3)', fill: true, tension: 0.4, pointBackgroundColor: 'var(--aviator-primary-accent)', pointBorderColor: '#ffffff', pointHoverRadius: 6, pointHoverBackgroundColor: '#ffffff', pointHoverBorderColor: 'var(--aviator-primary-accent)', pointRadius: 3 }] }, options: { responsive: true, maintainAspectRatio: false, scales: { y: { beginAtZero: false, min: 1, ticks: { color: 'var(--aviator-text-color)', padding: 5 }, grid: { color: 'rgba(251, 191, 36, 0.15)', drawBorder: false } }, x: { display: true, ticks: { color: 'var(--aviator-muted-text)', font: { size: 10 } }, grid: { display: false } } }, plugins: { legend: { display: false }, tooltip: { enabled: true, backgroundColor: 'rgba(15, 23, 42, 0.9)', titleColor: 'var(--aviator-primary-accent)', bodyColor: 'var(--aviator-text-color)', padding: 10, cornerRadius: 5, displayColors: false, titleFont: { weight: 'bold' }, bodyAlign: 'center', callbacks: { label: function(c) { let l = c.dataset.label || ''; if (l) { l += ': '; } if (c.parsed.y !== null) { l += c.parsed.y.toFixed(2) + 'x'; } return l; } } } } } }); } catch (e) { console.error("Failed to create/update Aviator chart:", e); updateAviatorStatus("Chart rendering error.", "error"); } }
                function resetAviatorData() { if (confirm('Are you sure you want to clear all Aviator round data? This cannot be undone.')) { aviatorRoundData = []; if(aviatorHistoryEl) aviatorHistoryEl.innerText = 'No data yet. Enter rounds above.'; if(aviatorInputErrorEl) aviatorInputErrorEl.innerText = ''; if(aviatorRoundInput) aviatorRoundInput.value = ''; predictAviator([]); if (aviatorChartInstance) { try { aviatorChartInstance.destroy(); aviatorChartInstance = null; } catch (e) { console.error("Error destroying chart on reset:", e); } } try { localStorage.removeItem(AVIATOR_LOCAL_STORAGE_KEY); console.log("Aviator V13 data cleared from storage."); } catch (e) { console.error("Failed to remove Aviator V13 data from storage", e); updateAviatorStatus("Error clearing stored data.", "error"); } updateAviatorStatus('Data cleared. Enter 10 rounds for AI analysis.', 'inactive'); if(aviatorRoundInput) aviatorRoundInput.focus(); } }
                function exportAviatorData() { if (aviatorRoundData.length === 0) { updateAviatorStatus('No data available to export.', 'error'); if(aviatorExportBtn) { /* Add shake animation if needed */ } return; } try { const csvHeader = 'Round,Multiplier\n'; const csvRows = aviatorRoundData.map((v, i) => `${i + 1},${v.toFixed(2)}`).join('\n'); const csvContent = csvHeader + csvRows; const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' }); const url = URL.createObjectURL(blob); const link = document.createElement('a'); link.style.display = 'none'; link.setAttribute('href', url); const timestamp = new Date().toISOString().slice(0, 10); link.setAttribute('download', `aviator_v13_data_${timestamp}.csv`); document.body.appendChild(link); link.click(); document.body.removeChild(link); URL.revokeObjectURL(url); updateAviatorStatus(`Data exported successfully (${aviatorRoundData.length} rounds).`, 'active'); } catch (e) { console.error("CSV Export failed:", e); updateAviatorStatus('Data export failed.', 'error'); } }
                function updateAviatorStatus(m, t) { if (aviatorStatusEl) { aviatorStatusEl.innerText = m; aviatorStatusEl.classList.remove('status-active', 'status-inactive', 'status-error'); aviatorStatusEl.classList.add(`status-${t}`); } }
                function saveAviatorData() { if (!aviatorRoundData) { console.warn("Attempted to save invalid Aviator data."); return; } try { const d = { roundData: aviatorRoundData }; localStorage.setItem(AVIATOR_LOCAL_STORAGE_KEY, JSON.stringify(d)); } catch (e) { console.error('Save failed for Aviator V13 data:', e); updateAviatorStatus('Error saving data to local storage.', 'error'); } }
                function loadAviatorData() { console.log("Loading Aviator V13 data..."); try { const sD = localStorage.getItem(AVIATOR_LOCAL_STORAGE_KEY); let loaded = false; if (sD) { const p = JSON.parse(sD); if (p && Array.isArray(p.roundData) && p.roundData.every(v => typeof v === 'number' && !isNaN(v) && v >= 1.0)) { aviatorRoundData = p.roundData; if (aviatorRoundData.length > AVIATOR_MAX_HISTORY) { aviatorRoundData = aviatorRoundData.slice(-AVIATOR_MAX_HISTORY); console.log(`Loaded Aviator data trimmed to last ${AVIATOR_MAX_HISTORY} rounds.`); } console.log(`Loaded ${aviatorRoundData.length} Aviator V13 rounds successfully.`); loaded = true; } else { console.warn("Invalid data format found in local storage for Aviator V13. Resetting data."); aviatorRoundData = []; localStorage.removeItem(AVIATOR_LOCAL_STORAGE_KEY); } } else { console.log("No saved Aviator V13 data found."); aviatorRoundData = []; } if(aviatorHistoryEl) { aviatorHistoryEl.innerText = aviatorRoundData.length ? aviatorRoundData.map(v => v.toFixed(2)).join(', ') : 'No data yet. Enter rounds above.'; } predictAviator(aviatorRoundData); } catch (e) { console.error('Load failed for Aviator V13 data:', e); updateAviatorStatus('Error loading saved data. Resetting.', 'error'); aviatorRoundData = []; predictAviator([]); try { localStorage.removeItem(AVIATOR_LOCAL_STORAGE_KEY); } catch (removeError) { console.error("Failed to remove corrupted Aviator data:", removeError);} } }

                // --- General Chart Logic ---
                function renderChart(d, l = 'Results') { console.warn("General 'renderChart' function called - Likely unused."); /* ... */ }
                if (closeCanvasBtn) { closeCanvasBtn.addEventListener('click', () => { if (canvasContainer) canvasContainer.classList.remove('active'); if (chartInstance) { try { chartInstance.destroy(); } catch(e) { console.error("General chart close/destroy error:", e); } chartInstance = null; } }); } else { console.error("General Close Canvas Button ('#close-canvas') not found!"); }

                // --- Tab Switching & Final Initialization ---
                function switchTab(targetTab) { if (!targetTab) return; console.log(`Switching to tab: ${targetTab}`); tabButtons.forEach(btn => btn.classList.remove('active')); tabContents.forEach(content => content.classList.add('tab-hidden')); const activeButton = document.querySelector(`.tab-button[data-tab="${targetTab}"]`); const activeContent = document.getElementById(`${targetTab}-content`); if (activeButton) activeButton.classList.add('active'); if (activeContent) activeContent.classList.remove('tab-hidden'); else console.error(`Tab content not found for ID: ${targetTab}-content`); if (targetTab === 'aviator' && !aviatorInitialized) { initAviatorV13Analyzer(); aviatorInitialized = true; } if (targetTab === 'mines' && !minesInitialized) { initMinesPredictor(); minesInitialized = true; } if (targetTab !== 'prediction' && wingoTimerInterval) { stopAutoPredictionLoop(); if (winMenuContainer && !winMenuContainer.classList.contains('tab-hidden')) { winMenuContainer.classList.add('tab-hidden'); if(body) body.classList.remove('overflow-hidden'); if (startPredictionButton) startPredictionButton.classList.remove('tab-hidden'); } } }
                if (tabButtons.length > 0 && tabContents.length > 0) { tabButtons.forEach(button => { button.addEventListener('click', () => { const targetTab = button.getAttribute('data-tab'); switchTab(targetTab); }); }); const initialActiveTabButton = document.querySelector('.tab-button.active'); if (initialActiveTabButton) { switchTab(initialActiveTabButton.getAttribute('data-tab')); } else { const firstButton = document.querySelector('.tab-button'); if(firstButton) { firstButton.classList.add('active'); switchTab(firstButton.getAttribute('data-tab')); } else { console.error("No tab buttons found for initial setup."); } } } else { console.error("Tab buttons or content container not found!"); }
                if (winMenuContainer) winMenuContainer.classList.add('tab-hidden'); if (canvasContainer) canvasContainer.classList.remove('active'); if (startPredictionButton) startPredictionButton.classList.remove('tab-hidden');
                console.log("Predict VIP Script Setup Complete.");
            }); // End DOMContentLoaded
        })(); // End IIFE
    </script>
</body>
</html>